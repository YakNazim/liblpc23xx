<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>liblpc23xx: lpc23xx-i2c.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="dir_c7b5ca0bb54e9adae201f2aac08c1829.html">lpc23xx-i2c</a>      </li>
      <li><a class="el" href="dir_86422067c12c83740508ce201d8be37c.html">include</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>lpc23xx-i2c.h</h1>  </div>
</div>
<div class="contents">
<a href="lpc23xx-i2c_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 <span class="comment">/*</span>
<a name="l00003"></a>00003 <span class="comment"> * lpc23xx-i2c.h</span>
<a name="l00004"></a>00004 <span class="comment"> */</span>
<a name="l00005"></a>00005 
<a name="l00006"></a>00006 <span class="preprocessor">#ifndef _LPC23XX_I2C_H</span>
<a name="l00007"></a>00007 <span class="preprocessor"></span><span class="preprocessor">#define _LPC23XX_I2C_H</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;stdint.h&gt;</span>
<a name="l00010"></a>00010 
<a name="l00011"></a>00011 <span class="preprocessor">#include &quot;<a class="code" href="lpc23xx-binsem_8h.html">lpc23xx-binsem.h</a>&quot;</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="comment">// MAX values </span>
<a name="l00014"></a><a class="code" href="lpc23xx-i2c_8h.html#a403438c42324f8d59a122ca5563f266d">00014</a> <span class="preprocessor">#define I2C_MAX_BUFFER      64</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span>
<a name="l00016"></a>00016 <span class="comment">// VIC table page 94 lpc23xx manual</span>
<a name="l00017"></a><a class="code" href="lpc23xx-i2c_8h.html#a5f2d5dd8f61af5660fe2268a09b641f3">00017</a> <span class="preprocessor">#define VIC_I2C0_BIT        9</span>
<a name="l00018"></a><a class="code" href="lpc23xx-i2c_8h.html#af10e424f2e8fd3e6d43edc2db3373d29">00018</a> <span class="preprocessor"></span><span class="preprocessor">#define VIC_I2C1_BIT        19</span>
<a name="l00019"></a><a class="code" href="lpc23xx-i2c_8h.html#af6782b2259d518ff3a6ca9601445f55c">00019</a> <span class="preprocessor"></span><span class="preprocessor">#define VIC_I2C2_BIT        30</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span>
<a name="l00021"></a><a class="code" href="lpc23xx-i2c_8h.html#ac03a304bb7607196b61fafe1f8b5a467">00021</a> <span class="preprocessor">#define ENABLE_I2C0_INT     (VICIntEnable = (VICIntEnable | (1&lt;&lt;VIC_I2C0_BIT)))</span>
<a name="l00022"></a><a class="code" href="lpc23xx-i2c_8h.html#acc59b7256aad0a676d469f9c9a66dfcb">00022</a> <span class="preprocessor"></span><span class="preprocessor">#define ENABLE_I2C1_INT     (VICIntEnable = (VICIntEnable | (1&lt;&lt;VIC_I2C1_BIT)))</span>
<a name="l00023"></a><a class="code" href="lpc23xx-i2c_8h.html#aab9bdff94667fa9bb9e66261e12c0115">00023</a> <span class="preprocessor"></span><span class="preprocessor">#define ENABLE_I2C2_INT     (VICIntEnable = (VICIntEnable | (1&lt;&lt;VIC_I2C2_BIT)))</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span>
<a name="l00025"></a><a class="code" href="lpc23xx-i2c_8h.html#a6b4e23f2770b252d7d1c86fa618a9c49">00025</a> <span class="preprocessor">#define DISABLE_I2C0_INT    (VICIntEnable = (VICIntEnable &amp; ~(1&lt;&lt;VIC_I2C0_BIT)))</span>
<a name="l00026"></a><a class="code" href="lpc23xx-i2c_8h.html#a1553f10d86b9fb601533f482401d159b">00026</a> <span class="preprocessor"></span><span class="preprocessor">#define DISABLE_I2C1_INT    (VICIntEnable = (VICIntEnable &amp; ~(1&lt;&lt;VIC_I2C1_BIT)))</span>
<a name="l00027"></a><a class="code" href="lpc23xx-i2c_8h.html#a5fcd73b6485c35ae7b272c654036ae0f">00027</a> <span class="preprocessor"></span><span class="preprocessor">#define DISABLE_I2C2_INT    (VICIntEnable = (VICIntEnable &amp; ~(1&lt;&lt;VIC_I2C2_BIT)))</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span>
<a name="l00029"></a>00029 <span class="comment">// PCONP</span>
<a name="l00030"></a><a class="code" href="lpc23xx-i2c_8h.html#af79addec3192d5bfe5e154dd10ed4561">00030</a> <span class="preprocessor">#define PCI2C0_BIT          7</span>
<a name="l00031"></a><a class="code" href="lpc23xx-i2c_8h.html#a039bf6d9170776be5d72c23d041be101">00031</a> <span class="preprocessor"></span><span class="preprocessor">#define PCI2C1_BIT          19</span>
<a name="l00032"></a><a class="code" href="lpc23xx-i2c_8h.html#a4ed18b2a7e2beb1df80151ad60b1fbaf">00032</a> <span class="preprocessor"></span><span class="preprocessor">#define PCI2C2_BIT          26</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span>
<a name="l00034"></a><a class="code" href="lpc23xx-i2c_8h.html#a17b193a33e9c0fca52a2939dbfa79252">00034</a> <span class="preprocessor">#define POWER_I2C0_ON       (PCONP = (PCONP | (1&lt;&lt;PCI2C0_BIT)))</span>
<a name="l00035"></a><a class="code" href="lpc23xx-i2c_8h.html#aa2f4af3dc9c7b9ea24d8cb78360a65ee">00035</a> <span class="preprocessor"></span><span class="preprocessor">#define POWER_I2C1_ON       (PCONP = (PCONP | (1&lt;&lt;PCI2C1_BIT)))</span>
<a name="l00036"></a><a class="code" href="lpc23xx-i2c_8h.html#a08455ac16e58f7007af36fc58062dff2">00036</a> <span class="preprocessor"></span><span class="preprocessor">#define POWER_I2C2_ON       (PCONP = (PCONP | (1&lt;&lt;PCI2C2_BIT)))</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span>
<a name="l00038"></a><a class="code" href="lpc23xx-i2c_8h.html#a9f497069b2dce4ecb85ccfb4bf3bb3f8">00038</a> <span class="preprocessor">#define POWER_I2C0_OFF      (PCONP = (PCONP &amp; ~(1&lt;&lt;PCI2C0_BIT)))</span>
<a name="l00039"></a><a class="code" href="lpc23xx-i2c_8h.html#a49e0688cc4f72036656dc807559788a9">00039</a> <span class="preprocessor"></span><span class="preprocessor">#define POWER_I2C1_OFF      (PCONP = (PCONP &amp; ~(1&lt;&lt;PCI2C1_BIT)))</span>
<a name="l00040"></a><a class="code" href="lpc23xx-i2c_8h.html#afa94ec03fba8037a9099ff0702e1f867">00040</a> <span class="preprocessor"></span><span class="preprocessor">#define POWER_I2C2_OFF      (PCONP = (PCONP &amp; ~(1&lt;&lt;PCI2C2_BIT)))</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="comment">// I2C CONSET and CONCLR Bits</span>
<a name="l00044"></a>00044 <span class="comment">// SET</span>
<a name="l00045"></a><a class="code" href="lpc23xx-i2c_8h.html#a3a6f5731d5e5e7b21e5c01881d62a1b9">00045</a> <span class="preprocessor">#define I2C_AA              (1&lt;&lt;2)</span>
<a name="l00046"></a><a class="code" href="lpc23xx-i2c_8h.html#a086ce98cdfb4f65742d3eec098d3e273">00046</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C_SI              (1&lt;&lt;3)</span>
<a name="l00047"></a><a class="code" href="lpc23xx-i2c_8h.html#a3ec29c2b8a3f118cd6a4ad5b7b89be81">00047</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C_STO             (1&lt;&lt;4)</span>
<a name="l00048"></a><a class="code" href="lpc23xx-i2c_8h.html#a971d21035ba4ae2ef8287ed2a8c5f730">00048</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C_STA             (1&lt;&lt;5)</span>
<a name="l00049"></a><a class="code" href="lpc23xx-i2c_8h.html#affcdb0009758aeefc5a2f88a202d4db4">00049</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C_I2EN            (1&lt;&lt;6)</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span>        
<a name="l00051"></a>00051 <span class="comment">// CLEAR</span>
<a name="l00052"></a><a class="code" href="lpc23xx-i2c_8h.html#ab1f6773930be58e260498ede72f735e1">00052</a> <span class="preprocessor">#define I2C_AAC             (1&lt;&lt;2)</span>
<a name="l00053"></a><a class="code" href="lpc23xx-i2c_8h.html#a9c2083d4d8d52e3bc05e6c792626c437">00053</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C_SIC             (1&lt;&lt;3)</span>
<a name="l00054"></a><a class="code" href="lpc23xx-i2c_8h.html#a598951db01ab9dc9193b477551754cdf">00054</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C_STAC            (1&lt;&lt;5)</span>
<a name="l00055"></a><a class="code" href="lpc23xx-i2c_8h.html#adca7af52ae8f8378da618afa468aeae5">00055</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C_I2ENC           (1&lt;&lt;6)</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span>                           
<a name="l00057"></a>00057 <span class="comment">// I2C clock</span>
<a name="l00058"></a>00058 <span class="comment">// Table 435 p496 lpc23xx</span>
<a name="l00059"></a>00059 <span class="comment">//</span>
<a name="l00060"></a>00060 <span class="comment">// ( i2c clock speed ref: lpc23xx user manual p516)</span>
<a name="l00061"></a>00061 <span class="comment">// i2c standard clock speed goes to 100kHz</span>
<a name="l00062"></a>00062 
<a name="l00063"></a><a class="code" href="lpc23xx-i2c_8h.html#a8196ba04cdd7e7e3fa8234e4622a0fcc">00063</a> <span class="preprocessor">#define I2C0_IS_CCLK_DIV1   (PCLKSEL0 = ((PCLKSEL0  &amp; ~(11&lt;&lt;14)) | (0x01 &lt;&lt; 14)))</span>
<a name="l00064"></a><a class="code" href="lpc23xx-i2c_8h.html#a41b418e41998d1194e47f6205aabf63e">00064</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C0_IS_CCLK_DIV2   (PCLKSEL0 = ((PCLKSEL0  &amp; ~(11&lt;&lt;14)) | (0x10 &lt;&lt; 14)))</span>
<a name="l00065"></a><a class="code" href="lpc23xx-i2c_8h.html#a9c557e16d327492385aeff0fd91a03dc">00065</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C0_IS_CCLK_DIV4   (PCLKSEL0 = ((PCLKSEL0  &amp; ~(11&lt;&lt;14)) | (0x00 &lt;&lt; 14)))</span>
<a name="l00066"></a><a class="code" href="lpc23xx-i2c_8h.html#abc999e910c768381a46e3c5cb2348394">00066</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C0_IS_CCLK_DIV8   (PCLKSEL0 = ((PCLKSEL0  &amp; ~(11&lt;&lt;14)) | (0x11 &lt;&lt; 14)))</span>
<a name="l00067"></a>00067 <span class="preprocessor"></span>
<a name="l00068"></a><a class="code" href="lpc23xx-i2c_8h.html#a8309b3ef578f0ec87ace905bc1c8c38b">00068</a> <span class="preprocessor">#define I2C1_IS_CCLK_DIV1   (PCLKSEL1 = ((PCLKSEL1  &amp; ~(11&lt;&lt;6)) | (0x01 &lt;&lt; 6)))</span>
<a name="l00069"></a><a class="code" href="lpc23xx-i2c_8h.html#a6e1542dbb0832a5316e421f6b9b7d6a7">00069</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C1_IS_CCLK_DIV2   (PCLKSEL1 = ((PCLKSEL1  &amp; ~(11&lt;&lt;6)) | (0x10 &lt;&lt; 6)))</span>
<a name="l00070"></a><a class="code" href="lpc23xx-i2c_8h.html#a684235567ffc8cc47db9e18f948a2a7b">00070</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C1_IS_CCLK_DIV4   (PCLKSEL1 = ((PCLKSEL1  &amp; ~(11&lt;&lt;6)) | (0x00 &lt;&lt; 6)))</span>
<a name="l00071"></a><a class="code" href="lpc23xx-i2c_8h.html#ac8a00d904c8f0fa130876ce8cd87b7c1">00071</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C1_IS_CCLK_DIV8   (PCLKSEL1 = ((PCLKSEL1  &amp; ~(11&lt;&lt;6)) | (0x11 &lt;&lt; 6)))</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span>
<a name="l00073"></a><a class="code" href="lpc23xx-i2c_8h.html#a801359412745c9d63ac0dd2f92e96766">00073</a> <span class="preprocessor">#define I2C2_IS_CCLK_DIV1   (PCLKSEL1 = ((PCLKSEL1  &amp; ~(11&lt;&lt;20)) | (0x01 &lt;&lt; 20)))</span>
<a name="l00074"></a><a class="code" href="lpc23xx-i2c_8h.html#a426d0e20e35e556d7b28a73c3a83a7ce">00074</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C2_IS_CCLK_DIV2   (PCLKSEL1 = ((PCLKSEL1  &amp; ~(11&lt;&lt;20)) | (0x10 &lt;&lt; 20)))</span>
<a name="l00075"></a><a class="code" href="lpc23xx-i2c_8h.html#aa9982fef13e92466f5a89f2b9afd8232">00075</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C2_IS_CCLK_DIV4   (PCLKSEL1 = ((PCLKSEL1  &amp; ~(11&lt;&lt;20)) | (0x00 &lt;&lt; 20)))</span>
<a name="l00076"></a><a class="code" href="lpc23xx-i2c_8h.html#adf4e9a22a5adc5dda9e16a4def2aad0c">00076</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C2_IS_CCLK_DIV8   (PCLKSEL1 = ((PCLKSEL1  &amp; ~(11&lt;&lt;20)) | (0x11 &lt;&lt; 20)))</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span>
<a name="l00078"></a>00078 <span class="comment">// p516: Max rate is 400kHz according to lpc23xx manual.</span>
<a name="l00079"></a>00079 <span class="comment">//#define I2SCLHIGH           90</span>
<a name="l00080"></a>00080 <span class="comment">//#define I2SCLLOW            90</span>
<a name="l00081"></a><a class="code" href="lpc23xx-i2c_8h.html#a7298d3acb4f152b27bf1b401f809f1dd">00081</a> <span class="preprocessor">#define I2SCLHIGH           300</span>
<a name="l00082"></a><a class="code" href="lpc23xx-i2c_8h.html#a44023239d8f26bfa1270818c3e31984d">00082</a> <span class="preprocessor"></span><span class="preprocessor">#define I2SCLLOW            300</span>
<a name="l00083"></a>00083 <span class="preprocessor"></span>
<a name="l00084"></a>00084 <span class="comment">// Pinsel0 has builtin pullup. </span>
<a name="l00085"></a>00085 <span class="comment">// Pinsel1&amp;2 do not. </span>
<a name="l00086"></a><a class="code" href="lpc23xx-i2c_8h.html#afec424baa4b99cfd5225acb04b6d63ac">00086</a> <span class="preprocessor">#define I2C1_SDA1_PULLUP    (PINMODE1 = (PINMODE1 &amp; ~(3&lt;&lt;6))) // P0.19</span>
<a name="l00087"></a><a class="code" href="lpc23xx-i2c_8h.html#a7c02e362a6b5ac71ddbf8073e7d70885">00087</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C1_SCL1_PULLUP    (PINMODE1 = (PINMODE1 &amp; ~(3&lt;&lt;8))) // P0.20</span>
<a name="l00088"></a>00088 <span class="preprocessor"></span>
<a name="l00089"></a><a class="code" href="lpc23xx-i2c_8h.html#a0895e4e946170ab51aed5d484031aeff">00089</a> <span class="preprocessor">#define I2C2_SDA2_PULLUP    (PINMODE0 = (PINMODE0 &amp; ~(3&lt;&lt;20))) // P0.10</span>
<a name="l00090"></a><a class="code" href="lpc23xx-i2c_8h.html#adb5774aafcd866c7dc3bb4c0e449060f">00090</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C2_SCL2_PULLUP    (PINMODE0 = (PINMODE0 &amp; ~(3&lt;&lt;22))) // P0.11</span>
<a name="l00091"></a>00091 <span class="preprocessor"></span>
<a name="l00092"></a>00092 
<a name="l00093"></a>00093 
<a name="l00094"></a><a class="code" href="lpc23xx-i2c_8h.html#a966bc4ed6f0cefe7225b9a655abf4d7d">00094</a> <span class="preprocessor">#define SDA2_SEL           (0x2&lt;&lt;20)</span>
<a name="l00095"></a><a class="code" href="lpc23xx-i2c_8h.html#a9279afac4e805be06bce9a8383d12b3c">00095</a> <span class="preprocessor"></span><span class="preprocessor">#define SDA2MASK           ~(0x3&lt;&lt;20)</span>
<a name="l00096"></a>00096 <span class="preprocessor"></span>
<a name="l00097"></a><a class="code" href="lpc23xx-i2c_8h.html#a9ba81edf7bc352d54b820e8c258d9489">00097</a> <span class="preprocessor">#define SCL2_SEL           0x2&lt;&lt;22</span>
<a name="l00098"></a><a class="code" href="lpc23xx-i2c_8h.html#a18277ae7f365873b02a5c107ecce39b0">00098</a> <span class="preprocessor"></span><span class="preprocessor">#define SCL2MASK           ~(0x3&lt;&lt;22)</span>
<a name="l00099"></a>00099 <span class="preprocessor"></span>
<a name="l00100"></a><a class="code" href="lpc23xx-i2c_8h.html#a65ddab552a6cc2907123b9307ed1da7a">00100</a> <span class="preprocessor">#define SDA1_SEL           (0x3&lt;&lt;0)</span>
<a name="l00101"></a><a class="code" href="lpc23xx-i2c_8h.html#a6885bc56db3b8ff1df9452115e4176a9">00101</a> <span class="preprocessor"></span><span class="preprocessor">#define SDA1MASK           ~(0x3&lt;&lt;0)</span>
<a name="l00102"></a>00102 <span class="preprocessor"></span>
<a name="l00103"></a><a class="code" href="lpc23xx-i2c_8h.html#a04f11b22e76997ef81e4680929c0c107">00103</a> <span class="preprocessor">#define SCL1_SEL           0x3&lt;&lt;2</span>
<a name="l00104"></a><a class="code" href="lpc23xx-i2c_8h.html#a7ccdfb1813255a33ca1d7f50d1e9b9a4">00104</a> <span class="preprocessor"></span><span class="preprocessor">#define SCL1MASK           ~(0x3&lt;&lt;2)</span>
<a name="l00105"></a>00105 <span class="preprocessor"></span>
<a name="l00106"></a><a class="code" href="lpc23xx-i2c_8h.html#ab9e0ce52775f324a21ea29d1ba4db6e9">00106</a> <span class="preprocessor">#define SDA0_SEL            0x1&lt;&lt;22</span>
<a name="l00107"></a><a class="code" href="lpc23xx-i2c_8h.html#a19a4cc18fae959fd755eb9163526e02a">00107</a> <span class="preprocessor"></span><span class="preprocessor">#define SDA0MASK           ~(0x3&lt;&lt;22)</span>
<a name="l00108"></a>00108 <span class="preprocessor"></span>
<a name="l00109"></a><a class="code" href="lpc23xx-i2c_8h.html#a0c6f0fd576035b061c64007f6be04a9d">00109</a> <span class="preprocessor">#define SCL0_SEL            0x1&lt;&lt;24</span>
<a name="l00110"></a><a class="code" href="lpc23xx-i2c_8h.html#a4dcaadf983641e4f7246a9f9a852f680">00110</a> <span class="preprocessor"></span><span class="preprocessor">#define SCL0MASK           ~(0x3&lt;&lt;24)</span>
<a name="l00111"></a>00111 <span class="preprocessor"></span>
<a name="l00112"></a><a class="code" href="lpc23xx-i2c_8h.html#a6d5138426a8d8bee9ac7a80779235e60">00112</a> <span class="preprocessor">#define I2C0_ENABLE_SDA0_PIN   (PINSEL1 = ((PINSEL1 &amp; SDA0MASK) | SDA0_SEL))</span>
<a name="l00113"></a><a class="code" href="lpc23xx-i2c_8h.html#ae6b8e47f5358db4c0cd7c2e26fe6acae">00113</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C0_ENABLE_SCL0_PIN   (PINSEL1 = ((PINSEL1 &amp; SCL0MASK) | SCL0_SEL))</span>
<a name="l00114"></a>00114 <span class="preprocessor"></span>
<a name="l00115"></a><a class="code" href="lpc23xx-i2c_8h.html#a3e7c9cee8491ea4e8971dd066b95bfae">00115</a> <span class="preprocessor">#define I2C1_ENABLE_SDA1_PIN   (PINSEL0 = ((PINSEL0 &amp; SDA1MASK) | SDA1_SEL))</span>
<a name="l00116"></a><a class="code" href="lpc23xx-i2c_8h.html#ac6c039ffb1795cebb910b0833ce60320">00116</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C1_ENABLE_SCL1_PIN   (PINSEL0 = ((PINSEL0 &amp; SCL1MASK) | SCL1_SEL))</span>
<a name="l00117"></a>00117 <span class="preprocessor"></span>
<a name="l00118"></a><a class="code" href="lpc23xx-i2c_8h.html#a00d494b7220aee048813f22326874754">00118</a> <span class="preprocessor">#define I2C2_ENABLE_SDA2_PIN   (PINSEL0 = ((PINSEL0 &amp; SDA2MASK) | SDA2_SEL))</span>
<a name="l00119"></a><a class="code" href="lpc23xx-i2c_8h.html#a1bf4a657363d91bf9fbfc402884a5f7c">00119</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C2_ENABLE_SCL2_PIN   (PINSEL0 = ((PINSEL0 &amp; SCL2MASK) | SCL2_SEL))</span>
<a name="l00120"></a>00120 <span class="preprocessor"></span>
<a name="l00121"></a><a class="code" href="lpc23xx-i2c_8h.html#a82ebc7692872cb7304c5080137477a2a">00121</a> <span class="preprocessor">#define I2C_BINSEM_WAITTICKS  3000</span>
<a name="l00122"></a>00122 <span class="preprocessor"></span>
<a name="l00123"></a>00123 
<a name="l00124"></a><a class="code" href="lpc23xx-i2c_8h.html#ade4f9262b42007131dfb5adddab65dc5">00124</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> { <a class="code" href="lpc23xx-i2c_8h.html#ade4f9262b42007131dfb5adddab65dc5a8b606b29817406621b85b78b1ee9e653">I2C0</a>=0, I2C1, <a class="code" href="lpc23xx-i2c_8h.html#ade4f9262b42007131dfb5adddab65dc5ae2cc6f0481e798aedb5fd5c6a2bfc01b">I2C2</a> } i2c_iface;
<a name="l00125"></a>00125 
<a name="l00126"></a><a class="code" href="lpc23xx-i2c_8h.html#a3acd3f8324118cb8c44f79b0fa24190a">00126</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> { 
<a name="l00127"></a><a class="code" href="lpc23xx-i2c_8h.html#a3acd3f8324118cb8c44f79b0fa24190aa7810297ccb052132c025d8038759159e">00127</a>     <a class="code" href="lpc23xx-i2c_8h.html#a3acd3f8324118cb8c44f79b0fa24190aa7810297ccb052132c025d8038759159e">I2C_IDLE</a> = 0, 
<a name="l00128"></a><a class="code" href="lpc23xx-i2c_8h.html#a3acd3f8324118cb8c44f79b0fa24190aa3a5b6dff25cc014b099563334e716da5">00128</a>     I2C_START,
<a name="l00129"></a><a class="code" href="lpc23xx-i2c_8h.html#a3acd3f8324118cb8c44f79b0fa24190aa83145add4430a571309d667bd6c55bb4">00129</a>     I2C_RESTART,
<a name="l00130"></a><a class="code" href="lpc23xx-i2c_8h.html#a3acd3f8324118cb8c44f79b0fa24190aa1bc7ed9e269137778528e67ceb130aab">00130</a>     I2C_REPEATED_START,
<a name="l00131"></a><a class="code" href="lpc23xx-i2c_8h.html#a3acd3f8324118cb8c44f79b0fa24190aaf32bfe72dd3fb393fa0882f03a192e96">00131</a>     I2C_ACK,
<a name="l00132"></a><a class="code" href="lpc23xx-i2c_8h.html#a3acd3f8324118cb8c44f79b0fa24190aa52698f407103d1a466a233dd69d0c74c">00132</a>     I2C_NOTACK,
<a name="l00133"></a><a class="code" href="lpc23xx-i2c_8h.html#a3acd3f8324118cb8c44f79b0fa24190aa2e4932a1868432bff23103fac0127fdc">00133</a>     <a class="code" href="lpc23xx-i2c_8h.html#a3acd3f8324118cb8c44f79b0fa24190aa2e4932a1868432bff23103fac0127fdc">I2C_ERROR</a>
<a name="l00134"></a>00134 } i2c_state;
<a name="l00135"></a>00135 
<a name="l00136"></a><a class="code" href="structi2c__master__xact.html">00136</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structi2c__master__xact.html">i2c_master_xact</a> {
<a name="l00137"></a><a class="code" href="structi2c__master__xact.html#a48fd3d2ccd1c1fe0294bdc1e3cbf6d84">00137</a>      <a class="code" href="lpc23xx-i2c_8h.html#a3acd3f8324118cb8c44f79b0fa24190a">i2c_state</a> <a class="code" href="structi2c__master__xact.html#a48fd3d2ccd1c1fe0294bdc1e3cbf6d84">state</a>;
<a name="l00138"></a>00138 
<a name="l00139"></a><a class="code" href="structi2c__master__xact.html#a604bda43e88c32100def21e2efcd1b73">00139</a>      uint8_t   <a class="code" href="structi2c__master__xact.html#a604bda43e88c32100def21e2efcd1b73">i2c_tx_buffer</a>[I2C_MAX_BUFFER];  <span class="comment">// Transmit data for transaction</span>
<a name="l00140"></a><a class="code" href="structi2c__master__xact.html#af906ec5d4c8af2fded4b923321a1ce10">00140</a>      uint8_t   <a class="code" href="structi2c__master__xact.html#af906ec5d4c8af2fded4b923321a1ce10">i2c_rd_buffer</a>[I2C_MAX_BUFFER];  <span class="comment">// Receive  data for transaction</span>
<a name="l00141"></a><a class="code" href="structi2c__master__xact.html#ab2a150de53d6efb7e1ef04a67a3f3d23">00141</a>      uint8_t   <a class="code" href="structi2c__master__xact.html#ab2a150de53d6efb7e1ef04a67a3f3d23">i2c_ext_slave_address</a>;
<a name="l00142"></a><a class="code" href="structi2c__master__xact.html#aec9e7eee61445a5e22c878bb3ed8e29c">00142</a>      uint32_t  <a class="code" href="structi2c__master__xact.html#aec9e7eee61445a5e22c878bb3ed8e29c">write_length</a>;
<a name="l00143"></a><a class="code" href="structi2c__master__xact.html#af7add9f3225df4f5852cb882e3933970">00143</a>      uint32_t  <a class="code" href="structi2c__master__xact.html#af7add9f3225df4f5852cb882e3933970">read_length</a>;
<a name="l00144"></a><a class="code" href="structi2c__master__xact.html#a695614bd926635738356a117bf305555">00144</a>      uint32_t  <a class="code" href="structi2c__master__xact.html#a695614bd926635738356a117bf305555">xact_active</a>;
<a name="l00145"></a><a class="code" href="structi2c__master__xact.html#a80060f16a5c5dc711a26fcfce4daedaf">00145</a>      uint32_t  <a class="code" href="structi2c__master__xact.html#a80060f16a5c5dc711a26fcfce4daedaf">xact_success</a>;
<a name="l00146"></a>00146 
<a name="l00147"></a>00147 } <a class="code" href="structi2c__master__xact.html">i2c_master_xact_t</a>;
<a name="l00148"></a>00148 
<a name="l00149"></a><a class="code" href="lpc23xx-i2c_8h.html#ad8aaf2b0254a9d507af53f303ba7fdb2">00149</a> <span class="keyword">typedef</span> void (<a class="code" href="lpc23xx-i2c_8h.html#ad8aaf2b0254a9d507af53f303ba7fdb2">XACT_FnCallback</a>) (<a class="code" href="structi2c__master__xact.html">i2c_master_xact_t</a>* caller, <a class="code" href="structi2c__master__xact.html">i2c_master_xact_t</a>* i2c);
<a name="l00150"></a>00150 
<a name="l00151"></a>00151 <span class="comment">// Use a binary semaphore for mutual exclusion on the i2c interface.</span>
<a name="l00152"></a>00152 <span class="keyword">extern</span> <span class="keyword">volatile</span>  <a class="code" href="lpc23xx-binsem_8h.html#ae19d8b935a23f25cabb926d63af5edbc">bin_semaphore</a>         <a class="code" href="lpc23xx-i2c_8h.html#a20478cccbe8deffc74b3931e41d24b6c">i2c0_binsem_g</a>;
<a name="l00153"></a>00153 <span class="keyword">extern</span> <span class="keyword">volatile</span>  <a class="code" href="lpc23xx-binsem_8h.html#ae19d8b935a23f25cabb926d63af5edbc">bin_semaphore</a>         <a class="code" href="lpc23xx-i2c_8h.html#abdeb664cf001482931eeb16f58e743d6">i2c1_binsem_g</a>;
<a name="l00154"></a>00154 <span class="keyword">extern</span> <span class="keyword">volatile</span>  <a class="code" href="lpc23xx-binsem_8h.html#ae19d8b935a23f25cabb926d63af5edbc">bin_semaphore</a>         <a class="code" href="lpc23xx-i2c_8h.html#a420ffbe55e3ddba708a84583bd6ea11c">i2c2_binsem_g</a>;
<a name="l00155"></a>00155 
<a name="l00156"></a>00156 <span class="comment">// One structure for each i2c channel</span>
<a name="l00157"></a>00157 <span class="keyword">extern</span> <a class="code" href="structi2c__master__xact.html">i2c_master_xact_t</a>     <a class="code" href="lpc23xx-i2c_8h.html#a0f689fe2c1bc50da7f8717bba618cb7c">i2c0_s_g</a>;
<a name="l00158"></a>00158 <span class="keyword">extern</span> <a class="code" href="structi2c__master__xact.html">i2c_master_xact_t</a>     <a class="code" href="lpc23xx-i2c_8h.html#ab22b4a8272c81e26bdfd4cbdef095365">i2c1_s_g</a>;
<a name="l00159"></a>00159 <span class="keyword">extern</span> <a class="code" href="structi2c__master__xact.html">i2c_master_xact_t</a>     <a class="code" href="lpc23xx-i2c_8h.html#ac9ba2cd2ac65281cddac27eb17758032">i2c2_s_g</a>;
<a name="l00160"></a>00160 
<a name="l00161"></a>00161 <span class="keyword">extern</span> <span class="keyword">volatile</span> uint32_t     <a class="code" href="lpc23xx-i2c_8h.html#a41fd5a38ecd5593563033407ec83ef5f">i2c0_wrindex_g</a>;
<a name="l00162"></a>00162 <span class="keyword">extern</span> <span class="keyword">volatile</span> uint32_t     <a class="code" href="lpc23xx-i2c_8h.html#af4f83978c165a76110ec4ac42559dae9">i2c0_rdindex_g</a>;
<a name="l00163"></a>00163 
<a name="l00164"></a>00164 <span class="keyword">extern</span> <span class="keyword">volatile</span> uint32_t     <a class="code" href="lpc23xx-i2c_8h.html#a66a5180b56415bc203a4fdce31b89a73">i2c1_wrindex_g</a>;
<a name="l00165"></a>00165 <span class="keyword">extern</span> <span class="keyword">volatile</span> uint32_t     <a class="code" href="lpc23xx-i2c_8h.html#ad701ab982e6d68b5f3730803caa033a9">i2c1_rdindex_g</a>;
<a name="l00166"></a>00166 
<a name="l00167"></a>00167 <span class="keyword">extern</span> <span class="keyword">volatile</span> uint32_t     <a class="code" href="lpc23xx-i2c_8h.html#a9450d03979046f17f86bfd058a100f1d">i2c2_wrindex_g</a>;
<a name="l00168"></a>00168 <span class="keyword">extern</span> <span class="keyword">volatile</span> uint32_t     <a class="code" href="lpc23xx-i2c_8h.html#a1e2eb19e2f46c3d12834399227f4ec73">i2c2_rdindex_g</a>;
<a name="l00169"></a>00169 
<a name="l00170"></a>00170 <span class="keyword">extern</span> <a class="code" href="lpc23xx-i2c_8h.html#ad8aaf2b0254a9d507af53f303ba7fdb2">XACT_FnCallback</a>*      <a class="code" href="lpc23xx-i2c_8h.html#a443cd6fa3c3e2d25fb98fa82fc5173aa">_i2c0_FnCallback_g</a>;
<a name="l00171"></a>00171 <span class="keyword">extern</span> <a class="code" href="lpc23xx-i2c_8h.html#ad8aaf2b0254a9d507af53f303ba7fdb2">XACT_FnCallback</a>*      <a class="code" href="lpc23xx-i2c_8h.html#aecf13ad52257456a1bcc5503264d39aa">_i2c1_FnCallback_g</a>;
<a name="l00172"></a>00172 <span class="keyword">extern</span> <a class="code" href="lpc23xx-i2c_8h.html#ad8aaf2b0254a9d507af53f303ba7fdb2">XACT_FnCallback</a>*      <a class="code" href="lpc23xx-i2c_8h.html#a6da2e20863f14fdc4b0f1f5652b62d31">_i2c2_FnCallback_g</a>;
<a name="l00173"></a>00173 
<a name="l00174"></a>00174 <span class="keyword">extern</span> <a class="code" href="structi2c__master__xact.html">i2c_master_xact_t</a>*    <a class="code" href="lpc23xx-i2c_8h.html#aba25703743b897b3a6ce86d1cddb4ee6">i2c0_s_caller_g</a>;
<a name="l00175"></a>00175 <span class="keyword">extern</span> <a class="code" href="structi2c__master__xact.html">i2c_master_xact_t</a>*    <a class="code" href="lpc23xx-i2c_8h.html#a209c90f42c097c6d0f935ec83401d058">i2c1_s_caller_g</a>;
<a name="l00176"></a>00176 <span class="keyword">extern</span> <a class="code" href="structi2c__master__xact.html">i2c_master_xact_t</a>*    <a class="code" href="lpc23xx-i2c_8h.html#a1d6a7c45d893371addd1a066e94013bb">i2c2_s_caller_g</a>;
<a name="l00177"></a>00177 
<a name="l00178"></a>00178 <span class="keywordtype">void</span> <a class="code" href="lpc23xx-i2c_8h.html#afa14837ee2f9cc23a2b5e0263bdd1e02">i2c0_isr</a>(<span class="keywordtype">void</span>) <a class="code" href="lpc23xx-info_8h.html#ae1c2ecb8e547291fd5831af22b09fba6">__attribute__</a> ((interrupt(&quot;IRQ&quot;)));
<a name="l00179"></a>00179 <span class="keywordtype">void</span> <a class="code" href="lpc23xx-i2c_8h.html#a41c41705a4896ce5f2c2bff87f540f72">i2c1_isr</a>(<span class="keywordtype">void</span>) <a class="code" href="lpc23xx-info_8h.html#ae1c2ecb8e547291fd5831af22b09fba6">__attribute__</a> ((interrupt(&quot;IRQ&quot;)));
<a name="l00180"></a>00180 <span class="keywordtype">void</span> <a class="code" href="lpc23xx-i2c_8h.html#a908dc17bf80770c86e8b61e288d5e3e5">i2c2_isr</a>(<span class="keywordtype">void</span>) <a class="code" href="lpc23xx-info_8h.html#ae1c2ecb8e547291fd5831af22b09fba6">__attribute__</a> ((interrupt(&quot;IRQ&quot;)));
<a name="l00181"></a>00181 
<a name="l00182"></a>00182 <span class="comment">// // still experimenting. gcc v4.5.2 may do the correct thing now.</span>
<a name="l00183"></a>00183 <span class="comment">// void i2c0_isr(void) __attribute__ ((naked));  // use ISR_ENTRY/ISR_EXIT from lpc23xx-vic.h</span>
<a name="l00184"></a>00184 <span class="comment">// void i2c1_isr(void) __attribute__ ((naked));</span>
<a name="l00185"></a>00185 <span class="comment">// void i2c2_isr(void) __attribute__ ((naked));</span>
<a name="l00186"></a>00186 <span class="comment">// </span>
<a name="l00187"></a>00187 <span class="comment">// void i2cgeneral_call(i2c_iface channel);</span>
<a name="l00188"></a>00188 
<a name="l00189"></a>00189 uint8_t <a class="code" href="lpc23xx-i2c_8h.html#a7908b4875f756c15d7267a0fb2ff6ee1">i2c_create_read_address</a>(uint8_t addr) ;
<a name="l00190"></a>00190 uint8_t <a class="code" href="lpc23xx-i2c_8h.html#aafa7ee47b4a1727ce8f9ab74814e0bf9">i2c_create_write_address</a>(uint8_t addr) ;
<a name="l00191"></a>00191 <span class="keywordtype">void</span>    <a class="code" href="lpc23xx-i2c_8h.html#a184b3cb77ed3586d1f052e7c26ae3e0c">i2c_init_state</a>( <a class="code" href="structi2c__master__xact.html">i2c_master_xact_t</a>* s) ;
<a name="l00192"></a>00192 <span class="keywordtype">void</span>    <a class="code" href="lpc23xx-i2c_8h.html#a513169c010afa823c1fd1b3c5e877cec">i2c_init</a>(<a class="code" href="lpc23xx-i2c_8h.html#ade4f9262b42007131dfb5adddab65dc5">i2c_iface</a> channel) ;
<a name="l00193"></a>00193 <span class="keywordtype">void</span>    <a class="code" href="lpc23xx-i2c_8h.html#af04e60f4a3561c6a5f7a6c980bba1e4f">i2c_freq</a>(<a class="code" href="lpc23xx-i2c_8h.html#ade4f9262b42007131dfb5adddab65dc5">i2c_iface</a> channel, uint16_t highcount, uint16_t lowcount) ;
<a name="l00194"></a>00194 <span class="keywordtype">void</span>    <a class="code" href="lpc23xx-i2c_8h.html#ad25b77e982ef2189194e40735a660135">i2c0_get_read_data</a>(<a class="code" href="structi2c__master__xact.html">i2c_master_xact_t</a>* s) ;
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 <span class="keywordtype">void</span>    <a class="code" href="lpc23xx-i2c_8h.html#a0b40ebb171e47e4fc3d5e95de751c649">start_i2c0_master_xact</a>(<a class="code" href="structi2c__master__xact.html">i2c_master_xact_t</a>* s, <a class="code" href="lpc23xx-i2c_8h.html#ad8aaf2b0254a9d507af53f303ba7fdb2">XACT_FnCallback</a>* xact_fn) ;
<a name="l00197"></a>00197 <span class="keywordtype">void</span>    <a class="code" href="lpc23xx-i2c_8h.html#a4575dc993ff9c185050f6196af56d071">start_i2c1_master_xact</a>(<a class="code" href="structi2c__master__xact.html">i2c_master_xact_t</a>* s, <a class="code" href="lpc23xx-i2c_8h.html#ad8aaf2b0254a9d507af53f303ba7fdb2">XACT_FnCallback</a>* xact_fn) ;
<a name="l00198"></a>00198 <span class="keywordtype">void</span>    <a class="code" href="lpc23xx-i2c_8h.html#aed682549f88c5c3b23a173e241125747">start_i2c2_master_xact</a>(<a class="code" href="structi2c__master__xact.html">i2c_master_xact_t</a>* s, <a class="code" href="lpc23xx-i2c_8h.html#ad8aaf2b0254a9d507af53f303ba7fdb2">XACT_FnCallback</a>* xact_fn) ;
<a name="l00199"></a>00199 
<a name="l00200"></a>00200 <span class="comment">/*</span>
<a name="l00201"></a>00201 <span class="comment">void I2C1_master_xact(i2c_master_xact_t&amp;  s) ;</span>
<a name="l00202"></a>00202 <span class="comment">void I2C2_master_xact(i2c_master_xact_t&amp;  s) ;</span>
<a name="l00203"></a>00203 <span class="comment">*/</span>
<a name="l00204"></a>00204 
<a name="l00205"></a>00205 <span class="preprocessor">#endif</span>
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Fri Aug 26 2011 12:39:57 for liblpc23xx by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
